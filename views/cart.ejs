<%-include('header')%>
  <div class="containers1">
      <table class="table" style="color: white;">
        <thead>
          <tr>
            <th scope="col">#</th>
            <th scope="col">Movie Name</th>
            <th scope="col">Movie Poster</th>
            <th scope="col">Ticket Price</th>
            <th scope="col">Total Ticket</th>
            <th scope="col">Total ₹</th>
            <th scope="col">Action</th>
          </tr>
        </thead>
        <tbody class="table-group-divider">
          <%let i=1%>
            <%for(let data of cartMovie){%>
              <tr>
                <th scope="row">
                  <%= i%>
                </th>
                <td>
                  <%=data.name%>
                </td>
                <td><img src="<%= data.thumbnail%>" width="200px" height="300px" style="object-fit: cover;" alt=""></td>
                <td>
                  <%=data.price%>
                </td>
                <td><input type="number" class="form-control" id="qty" onchange="getTotal(<%=data.price%>,<%= i++%>)"
                    min="1" max="99" style="background: transparent; color: white;
            width: 75px;"></td>
                <td id="total">0</td>
                <td>
                  <div class="dropdown">
                    <button type="button" class="btn p-0 dropdown-toggle hide-arrow" data-bs-toggle="dropdown">
                      <i class="bi bi-three-dots-vertical" style="color: white;"></i>
                    </button>
                    <div class="dropdown-menu">
                      <a class="dropdown-item" href="/deleteCart/<%= data.id%>"
                        ><i class="bx bx-trash me-1"></i> Delete</a
                      >
                    </div>
                  </div>
                </td>
  
              </tr>
              <%}%>
                <tr>
                  <th scope="row"></th>
                  <td colspan="2">Total ₹</td>
                  <td></td>
                  <td></td>
                  <td id="allTotal" align="center"></td>
                  <td align="center"><a href="/bookTicket"><button class="btn btn-lg fw-bold me-2 fs-6 vega-btn1" style="background:linear-gradient(135deg,#0ebac3,#09d261);color: #fdf8f2;">Book now</button></a></td>
                  
                </tr>
        </tbody>
      </table>
  </div>

  <script>
    function getTotal(price, total) {
      let qty = document.querySelectorAll('#qty');
      let tol = document.querySelectorAll('#total')
      let allTotal = 0;
      let j = 1;
      let pos = total - j
      let sum = qty[pos].value * price;

      tol[pos].innerHTML = sum+' ₹'

      for (let k = 0; k < tol.length; k++) {
        allTotal += parseInt(tol[k].innerHTML);
        document.getElementById('allTotal').innerHTML = allTotal+' ₹';
      }
      allTotal = 0;
    }



  </script>

  <%-include('footer')%>